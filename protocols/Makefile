#
# Makefile
#
# Makefile for macchina.io Protocols
#

.PHONY: clean all

ifndef MACCHINA_HAVE_COMPONENTS
sinclude ../components.make
endif

clean all:
ifdef MACCHINA_ENABLE_PROTOCOLS
ifdef MACCHINA_ENABLE_MQTT
	$(MAKE) -C MQTT $(MAKECMDGOALS)
endif
ifdef MACCHINA_ENABLE_XBEE
	$(MAKE) -C XBee $(MAKECMDGOALS)
endif
ifdef MACCHINA_ENABLE_BTLE
	$(MAKE) -C BtLE $(MAKECMDGOALS)
	$(MAKE) -C BtLE/BlueZ $(MAKECMDGOALS)
endif
ifdef MACCHINA_ENABLE_UDP
	$(MAKE) -C UDP $(MAKECMDGOALS)
endif
ifdef MACCHINA_ENABLE_MODBUS
	$(MAKE) -C Modbus $(MAKECMDGOALS)
ifdef MACCHINA_ENABLE_MODBUS_RTU
	$(MAKE) -C Modbus/RTU $(MAKECMDGOALS)
endif
ifdef MACCHINA_ENABLE_MODBUS_TCP
	$(MAKE) -C Modbus/TCP $(MAKECMDGOALS)
endif
ifdef MACCHINA_ENABLE_MODBUS_DEVICE
	$(MAKE) -C Modbus/Device $(MAKECMDGOALS)
endif
endif
ifdef MACCHINA_ENABLE_CAN
	$(MAKE) -C CAN $(MAKECMDGOALS)
	$(MAKE) -C CAN/SocketCAN $(MAKECMDGOALS)
endif
ifdef MACCHINA_ENABLE_WEBTUNNEL
	$(MAKE) -C WebTunnel $(MAKECMDGOALS)
endif
endif
